!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.axiosService=t():e.axiosService=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.STATUS_200=200,t.defaults={},t.requestDefaults={autoLoading:!0,msgKey:"error_msg",dataKey:"data",codeKey:"dm_error",successCode:0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isString=function(e){return"string"==typeof e},t.isNumber=function(e){return"number"==typeof e},t.isUndefined=function(e){return void 0===e},t.isObject=function(e){return null!==e&&"object"===(void 0===e?"undefined":r(e))},t.forEach=u,t.merge=function e(){var t={};function n(n,o){"object"===r(t[o])&&"object"===(void 0===n?"undefined":r(n))?t[o]=e(t[o],n):t[o]=n}for(var o=0,a=arguments.length;o<a;o++)u(arguments[o],n);return t},t.deepMerge=function e(){var t={};function n(n,o){"object"===r(t[o])&&"object"===(void 0===n?"undefined":r(n))?t[o]=e(t[o],n):"object"===(void 0===n?"undefined":r(n))?t[o]=e({},n):t[o]=n}for(var o=0,a=arguments.length;o<a;o++)u(arguments[o],n);return t};t.deepCopy=function(e){},t.formatRestFulUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t||{}).reduce(function(e,n){return e.replace("$"+n,t[n])},e||"")},t.joinRootAndPath=function(e,t){return e.replace(/\/$/,"")+"/"+function(e){return e.replace(/^\//,"")}(t)},Object.prototype.toString;var o=t.isArray=function(e){return"[object Array]"===toString.call(e)};function u(e,t){if(null!==e&&void 0!==e)if("object"!==(void 0===e?"undefined":r(e))&&(e=[e]),o(e))for(var n=0,u=e.length;n<u;n++)t(e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t(e[a],a,e)}t.extend=function(e,t){for(var n in t)e[n]=t[n];return e},t.logger={log:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["[axios-service]"].concat(n))},error:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,["[axios-service]"].concat(n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(1);var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$http=null,this.requestDefaults=t.requestDefaults||{},this.createdRequestStack=t.createdRequestStack||[],this.createdAxiosInstanceStack=t.createdAxiosInstanceStack||[]}return o(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setHttps(e),this.setDefaults(t.defaults),this.setRequestDefaults(t.requestDefaults),this._executeRequestInstance(),this._executeAxiosInstance()}},{key:"setHttps",value:function(e){this.$http=e||this.$http}},{key:"setDefaults",value:function(e){(0,a.extend)(this.$http.defaults,r({},u.defaults,e))}},{key:"setRequestDefaults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.extend)(this.requestDefaults,e)}},{key:"_executeRequestInstance",value:function(){var e=this;this.createdRequestStack.forEach(function(t){return t(e.$http)})}},{key:"_executeAxiosInstance",value:function(){var e=this;this.createdAxiosInstanceStack.forEach(function(t){return t(e.$http)})}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET="get",t.POST="post",t.DELETE="delete",t.OPTIONS="options",t.PUT="put",t.PATCH="patch",t.HEAD="head"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMockDecoratorByEnv=t.getRequestsByRoot=t.service=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(3),a=n(1),i=n(0),c=n(2),s=(r=c)&&r.__esModule?r:{default:r};var f=t.service=new s.default({requestDefaults:i.requestDefaults,createdRequestStack:[],createdAxiosInstanceStack:[]}),l=function(e){var t=e.root,n=void 0===t?"/":t,r=e.isCreateInstance,u=void 0,c=void 0,s=void 0,l=new Promise(function(e,t){s=e}),d=setTimeout(function(){u||a.logger.error("请注入axios实例, 如: axiosService.init(axios, config)")},3e3),v=function(){if(f.$http){clearTimeout(d);var t=void 0;return(t=r?f.$http.create(o({baseURL:n},e)):function(e){return f.$http(o({},e,{url:(0,a.joinRootAndPath)(n,e.url)}))}).baseURL=n,t}},p=function(e,t){var n;return(n=e,function(e){var t=o({},f.requestDefaults,e),r=t.msgKey,u=t.codeKey,c=t.dataKey,s=t.successCode;return function(e){var t=["url: "+n.baseURL+e.url,", params:",e.params,", data:",e.data];return n(e).then(function(e){var n=e.status,o=e.data;if(e.config,n===i.STATUS_200){if(!c)return Promise.resolve(o);var f=o[c],l=o[r],d=o[u];return(0,a.extend)(o,{data:f,msg:l,code:d}),d===s?Promise.resolve(o):(a.logger.error.apply(a.logger,["请求错误: msg: "+l+", code: "+d+" "].concat(t)),Promise.reject(o))}},function(e){return a.logger.error.apply(a.logger,["请求失败: "].concat(t)),Promise.reject(e)})}})(t)};(u=v())||(c=function(){if(!f.$http)return f.createdAxiosInstanceStack.push(s),l.then(v)}()).then(function(e){u=e});return{getAxiosInstance:function(e){return u},getAsyncAxiosInstance:function(e){return c},wrapperRequest:function(e){var t=void 0;return u?t=p(u,e):c&&c.then(function(n){t=p(n,e)}),function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t?t.apply(void 0,n):c.then(function(){return t.apply(void 0,n)})}}}},d=t.getRequestsByRoot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l(e),n=t.wrapperRequest;return{getAxiosInstance:t.getAxiosInstance,getAsyncAxiosInstance:t.getAsyncAxiosInstance,get:function(e,t,r){var a=n(t);return function(t,n){return a(o({url:e,method:u.GET,params:t},n,r))}},post:function(e,t,r){var a=n(t);return function(t,n){return a(o({url:e,method:u.POST,data:t},n,r))}},postXForm:function(e,t,r){var a=n(t);return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(o({url:e,method:u.POST,data:t,transformRequest:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1];return Object.keys(e).reduce(function(t,n){return t.append(n,e[n]),t},new FormData)}],headers:o({"Content-Type":"application/x-www-form-urlencoded"},n.headers)},n,r))}},restFulGet:function(e,t,r){var i=n(t);return function(t,n,c){return i(o({url:(0,a.formatRestFulUrl)(e,t),method:u.GET,params:n},c,r))}},restFulPost:function(e,t,r){var i=n(t);return function(t,n,c){return i(o({url:(0,a.formatRestFulUrl)(e,t),method:u.POST,data:n},c,r))}},delete:function(e,t,r){var i=n(t);return function(t,n,c){return i(o({url:(0,a.formatRestFulUrl)(e,t),method:u.DELETE,data:n},c,r))}},put:function(e,t,r){var i=n(t);return function(t,n,c){return i(o({url:(0,a.formatRestFulUrl)(e,t),method:u.PUT,data:n},c,r))}},patch:function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),c=2;c<r;c++)i[c-2]=arguments[c];var s=n(t);return function(t,n,r){return s(o({url:(0,a.formatRestFulUrl)(e,t),method:u.PATCH,data:n},r,i))}},head:function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];var c=n(t);return function(t){return c(o({url:e,method:u.HEAD},t,a))}},options:function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];var c=n(t);return function(t){return c(o({url:e,method:u.OPTIONS},t,a))}},request:function(e,t){for(var r=arguments.length,u=Array(r>2?r-2:0),a=2;a<r;a++)u[a-2]=arguments[a];var i=n(t);return function(t){return i(o({url:e},t,u))}},jsonp:function(e,t){}}};t.getMockDecoratorByEnv=function(e){return function(t){return function(n,r,o){var u=void 0,a=function(){return e?t.apply(void 0,arguments):u.apply(void 0,arguments)};return o||"function"!=typeof n?(u=o.initializer||o.value,o.initializer=o.value=function(e){return a},o):(u=n,a)}}};f.getRequestsByRoot=d,t.default=f}])});
//# sourceMappingURL=axios-service.min.js.map