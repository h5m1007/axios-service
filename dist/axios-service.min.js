!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.axiosService=t():e.axiosService=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.STATUS_200=200,t.defaults={},t.requestDefaults={autoLoading:!0,msgKey:"error_msg",dataKey:"data",codeKey:"dm_error",successCode:0},t.UN_PRODUCTION=!1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isString=function(e){return"string"==typeof e},t.isNumber=function(e){return"number"==typeof e},t.isUndefined=function(e){return void 0===e},t.isObject=function(e){return null!==e&&"object"===(void 0===e?"undefined":n(e))},t.forEach=u,t.merge=function e(){var t={};function r(r,o){"object"===n(t[o])&&"object"===(void 0===r?"undefined":n(r))?t[o]=e(t[o],r):t[o]=r}for(var o=0,a=arguments.length;o<a;o++)u(arguments[o],r);return t},t.deepMerge=function e(){var t={};function r(r,o){"object"===n(t[o])&&"object"===(void 0===r?"undefined":n(r))?t[o]=e(t[o],r):"object"===(void 0===r?"undefined":n(r))?t[o]=e({},r):t[o]=r}for(var o=0,a=arguments.length;o<a;o++)u(arguments[o],r);return t};t.deepCopy=function(e){},t.formatRestFulUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t||{}).reduce(function(e,r){return e.replace("$"+r,t[r])},e||"")},t.joinRootAndPath=function(e,t){return e.replace(/\/$/,"")+"/"+function(e){return e.replace(/^\//,"")}(t)},Object.prototype.toString;var o=t.isArray=function(e){return"[object Array]"===toString.call(e)};function u(e,t){if(null!==e&&void 0!==e)if("object"!==(void 0===e?"undefined":n(e))&&(e=[e]),o(e))for(var r=0,u=e.length;r<u;r++)t(e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t(e[a],a,e)}t.extend=function(e,t){for(var r in t)e[r]=t[r];return e},t.logger={log:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).log.apply(e,["[axios-service]"].concat(r))},error:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).error.apply(e,["[axios-service]"].concat(r))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),a=r(1);var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$http=null,this.requestDefaults=t.requestDefaults||{},this.createdRequestStack=t.createdRequestStack||[],this.createdAxiosInstanceStack=t.createdAxiosInstanceStack||[]}return o(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setHttps(e),this.setDefaults(t.defaults),this.setRequestDefaults(t.requestDefaults),this._executeRequestInstance(),this._executeAxiosInstance()}},{key:"setHttps",value:function(e){this.$http=e||this.$http}},{key:"setDefaults",value:function(e){(0,a.extend)(this.$http.defaults,n({},u.defaults,e))}},{key:"setRequestDefaults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.extend)(this.requestDefaults,e)}},{key:"_executeRequestInstance",value:function(){var e=this;this.createdRequestStack.forEach(function(t){return t(e.$http)})}},{key:"_executeAxiosInstance",value:function(){var e=this;this.createdAxiosInstanceStack.forEach(function(t){return t(e.$http)})}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET="get",t.POST="post",t.DELETE="delete",t.OPTIONS="options",t.PUT="put",t.PATCH="patch",t.HEAD="head"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mockDecorator=t.getRequestsByRoot=t.service=void 0;var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=r(3),a=r(1),i=r(0),c=r(2),s=(n=c)&&n.__esModule?n:{default:n};var f=t.service=new s.default({requestDefaults:i.requestDefaults,createdRequestStack:[],createdAxiosInstanceStack:[]}),l=function(e){var t=e.root,r=void 0===t?"/":t,n=e.isCreateInstance,u=void 0,c=void 0,s=void 0,l=new Promise(function(e,t){s=e}),d=setTimeout(function(){u||a.logger.error("请注入axios实例, 如: axiosService.init(axios, config)")},3e3),p=function(){if(f.$http){clearTimeout(d);var t=void 0;return(t=n?f.$http.create(o({baseURL:r},e)):function(e){return f.$http(o({},e,{url:(0,a.joinRootAndPath)(r,e.url)}))}).baseURL=r,t}},v=function(e,t){var r;return(r=e,function(e){var t=o({},f.requestDefaults,e),n=t.msgKey,u=t.codeKey,c=t.dataKey,s=t.successCode;return function(e){var t=["url: "+r.baseURL+e.url,", params:",e.params,", data:",e.data];return r(e).then(function(e){var r=e.status,o=e.data;if(e.config,r===i.STATUS_200){if(!c)return Promise.resolve(o);var f=o[c],l=o[n],d=o[u];return(0,a.extend)(o,{data:f,msg:l,code:d}),d===s?Promise.resolve(o):(a.logger.error.apply(a.logger,["请求错误: msg: "+l+", code: "+d+" "].concat(t)),Promise.reject(o))}},function(e){return a.logger.error.apply(a.logger,["请求失败: "].concat(t)),Promise.reject(e)})}})(t)};(u=p())||(c=function(){if(!f.$http)return f.createdAxiosInstanceStack.push(s),l.then(p)}()).then(function(e){u=e});return{getAxiosInstance:function(e){return u},getAsyncAxiosInstance:function(e){return c},wrapperRequest:function(e){var t=void 0;return u?t=v(u,e):c&&c.then(function(r){t=v(r,e)}),function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t?t.apply(void 0,r):c.then(function(){return t.apply(void 0,r)})}}}},d=t.getRequestsByRoot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l(e),r=t.wrapperRequest;return{getAxiosInstance:t.getAxiosInstance,getAsyncAxiosInstance:t.getAsyncAxiosInstance,get:function(e,t,n){var a=r(t);return function(t,r){return a(o({url:e,method:u.GET,params:t},r,n))}},post:function(e,t,n){var a=r(t);return function(t,r){return a(o({url:e,method:u.POST,data:t},r,n))}},postXForm:function(e,t,n){var a=r(t);return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(o({url:e,method:u.POST,data:t,transformRequest:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1];return Object.keys(e).reduce(function(t,r){return t.append(r,e[r]),t},new FormData)}],headers:o({"Content-Type":"application/x-www-form-urlencoded"},r.headers)},r,n))}},restFulGet:function(e,t,n){var i=r(t);return function(t,r,c){return i(o({url:(0,a.formatRestFulUrl)(e,t),method:u.GET,params:r},c,n))}},restFulPost:function(e,t,n){var i=r(t);return function(t,r,c){return i(o({url:(0,a.formatRestFulUrl)(e,t),method:u.POST,data:r},c,n))}},delete:function(e,t,n){var i=r(t);return function(t,r,c){return i(o({url:(0,a.formatRestFulUrl)(e,t),method:u.DELETE,data:r},c,n))}},put:function(e,t,n){var i=r(t);return function(t,r,c){return i(o({url:(0,a.formatRestFulUrl)(e,t),method:u.PUT,data:r},c,n))}},patch:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),c=2;c<n;c++)i[c-2]=arguments[c];var s=r(t);return function(t,r,n){return s(o({url:(0,a.formatRestFulUrl)(e,t),method:u.PATCH,data:r},n,i))}},head:function(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var c=r(t);return function(t){return c(o({url:e,method:u.HEAD},t,a))}},options:function(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var c=r(t);return function(t){return c(o({url:e,method:u.OPTIONS},t,a))}},request:function(e,t){for(var n=arguments.length,u=Array(n>2?n-2:0),a=2;a<n;a++)u[a-2]=arguments[a];var i=r(t);return function(t){return i(o({url:e},t,u))}},jsonp:function(e,t){}}};t.mockDecorator=function(e){return function(t){return function(){return i.UN_PRODUCTION?e.apply(void 0,arguments):t.apply(void 0,arguments)}}};f.getRequestsByRoot=d,t.default=f}])});
//# sourceMappingURL=axios-service.min.js.map