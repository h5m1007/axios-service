!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.axiosService=t():e.axiosService=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.STATUS_200=200,t.defaults={},t.defaultBaseConfig={root:"/",isCreateInstance:!1},t.requestDefaults={autoLoading:!0,msgKey:"error_msg",dataKey:"data",codeKey:"dm_error",successCode:0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isString=function(e){return"string"==typeof e},t.isNumber=function(e){return"number"==typeof e},t.isUndefined=function(e){return void 0===e},t.isObject=function(e){return null!==e&&"object"===(void 0===e?"undefined":r(e))},t.forEach=u,t.merge=function e(){var t={};function n(n,o){"object"===r(t[o])&&"object"===(void 0===n?"undefined":r(n))?t[o]=e(t[o],n):t[o]=n}for(var o=0,i=arguments.length;o<i;o++)u(arguments[o],n);return t},t.deepMerge=function e(){var t={};function n(n,o){"object"===r(t[o])&&"object"===(void 0===n?"undefined":r(n))?t[o]=e(t[o],n):"object"===(void 0===n?"undefined":r(n))?t[o]=e({},n):t[o]=n}for(var o=0,i=arguments.length;o<i;o++)u(arguments[o],n);return t};t.deepCopy=function(e){},t.formatRestFulUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t||{}).reduce(function(e,n){return e.replace("$"+n,t[n])},e||"")},t.joinRootAndPath=function(e,t){return e.replace(/\/$/,"")+"/"+function(e){return e.replace(/^\//,"")}(t)},Object.prototype.toString;var o=t.isArray=function(e){return"[object Array]"===toString.call(e)};function u(e,t){if(null!==e&&void 0!==e)if("object"!==(void 0===e?"undefined":r(e))&&(e=[e]),o(e))for(var n=0,u=e.length;n<u;n++)t(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(e[i],i,e)}t.extend=function(e,t){for(var n in t)e[n]=t[n];return e},t.logger={log:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["[axios-service]"].concat(n))},error:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,["[axios-service]"].concat(n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=n(1);var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$http=null,this.requestDefaults=t.requestDefaults||{},this.createdRequestStack=t.createdRequestStack||[],this.createdAxiosInstanceStack=t.createdAxiosInstanceStack||[]}return o(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setHttps(e),this.setDefaults(t.defaults),this.setRequestDefaults(t.requestDefaults),this._executeRequestInstance(),this._executeAxiosInstance()}},{key:"setHttps",value:function(e){this.$http=e||this.$http}},{key:"setDefaults",value:function(e){(0,i.extend)(this.$http.defaults,r({},u.defaults,e))}},{key:"setRequestDefaults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.extend)(this.requestDefaults,e)}},{key:"_executeRequestInstance",value:function(){var e=this;this.createdRequestStack.forEach(function(t){return t(e.$http)})}},{key:"_executeAxiosInstance",value:function(){var e=this;this.createdAxiosInstanceStack.forEach(function(t){return t(e.$http)})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET="get",t.POST="post",t.DELETE="delete",t.OPTIONS="options",t.PUT="put",t.PATCH="patch",t.HEAD="head"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(3),i=n(1),a=n(0),c=n(2),s=(r=c)&&r.__esModule?r:{default:r};t.default=function e(){var t=new s.default({requestDefaults:a.requestDefaults,createdRequestStack:[],createdAxiosInstanceStack:[]}),n=function(e,n){var r=o({},t.requestDefaults,n),u=r.msgKey,c=r.codeKey,s=r.dataKey,f=r.successCode;return function(t){var n=["url: "+e.baseURL+t.url,", params:",t.params,", data:",t.data];return e(t).then(function(e){var t=e.status,r=e.data;if(e.config,t===a.STATUS_200){if(!s)return Promise.resolve(r);var o=r[s],l=r[u],d=r[c];return(0,i.extend)(r,{data:o,msg:l,code:d}),d===f?Promise.resolve(r):(i.logger.error.apply(i.logger,["请求错误: msg: "+l+", code: "+d+" "].concat(n)),Promise.reject(r))}},function(e){return i.logger.error.apply(i.logger,["请求失败: "].concat(n)),Promise.reject(e)})}};return t.getRequestsByRoot=function(){var e=function(e){var n=(0,i.extend)({},a.defaultBaseConfig),r=(0,i.extend)(n,e),u=r.root,c=r.isCreateInstance,s=void 0,f=void 0,l=void 0,d=new Promise(function(e,t){l=e}),v=setTimeout(function(){s||i.logger.error("请注入axios实例, 如: axiosService.init(axios, config)")},3e3),p=function(){if(t.$http){clearTimeout(v);var n=void 0;return(n=c?t.$http.create(o({baseURL:u},e)):function(e){return t.$http(o({},e,{url:(0,i.joinRootAndPath)(u,e.url)}))}).baseURL=u,n}};return(s=p())||(f=function(){if(!t.$http)return t.createdAxiosInstanceStack.push(l),d.then(p)}()).then(function(e){s=e}),{getAxiosInstance:function(e){return s},getAsyncAxiosInstance:function(e){return f}}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),r=e.getAxiosInstance,c=e.getAsyncAxiosInstance,s=function(e){return function(t,o){for(var u=arguments.length,i=Array(u>2?u-2:0),a=2;a<u;a++)i[a-2]=arguments[a];var s=function(e){var t=void 0,o=r(),u=c();return o?t=n(o,e):u&&u.then(function(r){t=n(r,e)}),function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t?t.apply(void 0,n):u.then(function(){return t.apply(void 0,n)})}}(o);return e.apply(void 0,[t,s].concat(i))}},f={getAxiosInstance:r,getAsyncAxiosInstance:c,get:s(function(e,t,n){return function(r,i){return t(o({url:e,method:u.GET,params:r},i,n))}}),post:s(function(e,t,n){return function(r,i){return t(o({url:e,method:u.POST,data:r},i,n))}}),postXForm:s(function(e,t,n){return function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(o({url:e,method:u.POST,data:r,transformRequest:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments[1],Object.keys(e).reduce(function(t,n){return t.append(n,e[n]),t},new FormData)}],headers:o({"Content-Type":"application/x-www-form-urlencoded"},i.headers)},i,n))}}),restFulGet:s(function(e,t,n){return function(r,a,c){return t(o({url:(0,i.formatRestFulUrl)(e,r),method:u.GET,params:a},c,n))}}),restFulPost:s(function(e,t,n){return function(r,a,c){return t(o({url:(0,i.formatRestFulUrl)(e,r),method:u.POST,data:a},c,n))}}),delete:s(function(e,t,n){return function(r,a,c){return t(o({url:(0,i.formatRestFulUrl)(e,r),method:u.DELETE,data:a},c,n))}}),put:s(function(e,t,n){return function(r,a,c){return t(o({url:(0,i.formatRestFulUrl)(e,r),method:u.PUT,data:a},c,n))}}),patch:s(function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return function(n,a,c){return t(o({url:(0,i.formatRestFulUrl)(e,n),method:u.PATCH,data:a},c,r))}}),head:s(function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return function(n){return t(o({url:e,method:u.HEAD},n,r))}}),options:s(function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return function(n){return t(o({url:e,method:u.OPTIONS},n,r))}}),request:s(function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),u=2;u<n;u++)r[u-2]=arguments[u];return function(n){return t(o({url:e},n,r))}}),jsonp:s(function(e,t){})};return f.restFulDelete=f.delete,f},t.create=e,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){return function(n,r,o){var u=void 0,i=function(){return e?t.apply(void 0,arguments):u.apply(void 0,arguments)};if(o||"function"!=typeof n){var a=o.initializer||o.value;return u=a()||function(){},o.initializer=o.value=function(e){return i},o}return u=n,i}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRequestsByRoot=t.createAxiosService=t.getMockDecoratorByEnv=void 0;var r=n(5);Object.defineProperty(t,"getMockDecoratorByEnv",{enumerable:!0,get:function(){return u(r).default}});var o=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)();t.createAxiosService=o.default;t.getRequestsByRoot=i.getRequestsByRoot;t.default=i}])});
//# sourceMappingURL=axios-service.min.js.map